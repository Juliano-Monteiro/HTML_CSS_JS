<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    <title>Silly story generator</title>

    <style>
      body {
        font-family: helvetica, sans-serif;
        width: 350px;
      }

      label {
        font-weight: bold;
      }

      div {
        padding-bottom: 20px;
      }

      input[type="text"] {
        padding: 5px;
        width: 150px;
      }

      p {
        background: #00771e;
        color: #ffffff;
        padding: 10px;
        visibility: hidden;
      }
    </style>
  </head>

  <body>
    <div>
      <label for="customname">Enter custom name:</label>
      <input id="customname" type="text" placeholder="" />
    </div>
    <div>
      <button class="randomize">Generate random story</button>
    </div>
    <!-- Thanks a lot to Willy Aguirre for his help with the code for this assessment -->
    <p class="story"></p>
  </body>
  <script>
    document.querySelector(".randomize").addEventListener("click",()=>{
        let nome = document.querySelector("#customname");
        let idioma = document.getElementsByName("ukus");
        let result = document.querySelector(".story");
        let frase = "Estavam 94 Fahrenheit lá fora, então :insertx1: fOi dar uma caminhada. Quando chegaram a :inserty2:  ficaram olhando horrorizados por alguns momentos, depois :insertz3: . Bob viu tudo, mas não ficou surpreso :insertx1: pesa 300 quilos e era um dia quente.";
        frase = frase.split(" ");
        frase = variacao(frase,nome);

        console.log(frase);
        result.textContent = frase;
        result.style.visibility = 'visible';
        
    });
    function randomValue(array){
        let random = Math.floor(Math.random()*array.length);
        return array[random];
    }
    function variacao(frase,nome){
        let valores1 = ["Willy, o Duende","Paizão","Papai Noel"];
        let valores2 = ["sopa dos pobres","Disneylândia","a Casa Branca"];
        let valores3 = ["combustão espontânea","derreteu em uma poça na calçada","se transformou em uma lesma e se arrastou para longe"];
        let variacao1 ="";
        if(nome.value !== '') {
            variacao1 = nome.value;
        }
        else{
            variacao1 = randomValue(valores1);
        }
        let variacao2 = randomValue(valores2);
        let variacao3 = randomValue(valores3);

        let campo1 = frase.indexOf(":insertx1:");
        frase[campo1] = variacao1;   
        let campo2 = frase.indexOf(":inserty2:");
        frase[campo2] = variacao2;    
        let campo3 = frase.indexOf(":insertz3:");
        frase[campo3] = variacao3;   
        let campo4 = frase.indexOf(":insertx1:");
        frase[campo4] = variacao1;   
        frase=frase.join(" ");
        return frase;
    }
  </script>
</html>